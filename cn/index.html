
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Exchange官方API文档</title>
    <link href="../images/favicon-3d972316.ico" rel="icon" type="image/ico">
    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sa, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-672a31fc.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-62a209d5.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-38e03f0a.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="cn cn_index" data-languages="[]">
    <div class="header">
      <img src="../images/logo-3d972316.png" class="logo" alt="" />
      <div class="lang">
        <span>简体中文</span>
        <img src="../images/down-c11a96e5.png" class="down" alt="" />
        <ul class="lang-list">
         <li class="active">
            <a href="/wbfapi/cn">
              简体中文
            </a>
         </li>
         <li class="">
            <a href="/wbfapi/en">
              English
            </a>
         </li>
        </ul>
      </div>
    </div>
    <a href="#" id="nav-button">
      <span>
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="搜索">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#45fa4e00db" class="toc-h1 toc-link" data-title="介绍">介绍</a>
          </li>
          <li>
            <a href="#60ff133549" class="toc-h1 toc-link" data-title="开始使用">开始使用</a>
          </li>
          <li>
            <a href="#api" class="toc-h1 toc-link" data-title="API接口加密验证">API接口加密验证</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#api-key" class="toc-h2 toc-link" data-title="生成API Key">生成API Key</a>
                  </li>
                  <li>
                    <a href="#9cea884c66" class="toc-h2 toc-link" data-title="发起请求"><span id="a3">发起请求</span></a>
                  </li>
                  <li>
                    <a href="#d2279731bb" class="toc-h2 toc-link" data-title="签名"><span id="a4">签名</span></a>
                  </li>
                  <li>
                    <a href="#f9ce6006dc" class="toc-h2 toc-link" data-title="请求交互"><span id="a6">请求交互</span></a>
                  </li>
                  <li>
                    <a href="#04ca77abba" class="toc-h2 toc-link" data-title="标准规范"><span id="a9">标准规范</span></a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#api-2" class="toc-h1 toc-link" data-title="业务API参考">业务API参考</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#open-api" class="toc-h2 toc-link" data-title="open-api"><span id="b6">open-api</span></a>
                  </li>
                  <li>
                    <a href="#ws-api" class="toc-h2 toc-link" data-title="ws-api"><span id="b7">ws-api</span></a>
                  </li>
                  <li>
                    <a href="#open-api-demo-java" class="toc-h2 toc-link" data-title="open-api Demo（java） "><span id="open-api-java">open-api Demo（java） </span></a>
                  </li>
                  <li>
                    <a href="#ws-api-demo-java" class="toc-h2 toc-link" data-title="ws-api Demo (java) "><span id="ws-api-java">ws-api Demo (java) </span></a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='45fa4e00db'>介绍</h1>
<p>欢迎使用交易所开发者文档</p>

<p>本文档提供了相关API的使用方法介绍。open-api包含了资产余额，获取全部委托，获取全部成交记录等接口，ws-api则提供了K线相关功能接口。</p>
<h1 id='60ff133549'>开始使用</h1>
<p>REST，即Representational State Transfer的缩写，是一种流行的互联网传输架构。它具有结构清晰、符合标准、易于理解、扩展方便的，正得到越来越多网站的采用。其优点如下：</p>

<ul>
<li>在RESTful架构中，每一个URL代表一种资源；</li>
<li>客户端和服务器之间，传递这种资源的某种表现层；</li>
<li>客户端通过四个HTTP指令，对服务器端资源进行操作，实现“表现层状态转化”。 </li>
</ul>

<p>建议开发者使用REST API进行币币交易或者资产提现等操作。</p>
<h1 id='api'>API接口加密验证</h1><h2 id='api-key'>生成API Key</h2>
<p>在对任何请求进行签名之前，您必须通过 [交易所]【用户中心】-【API】创建一个API key。 创建key后，您将获得3个必须记住的信息：</p>

<ul>
<li><p>API Key</p></li>
<li><p>Secret Key</p></li>
</ul>

<p>API Key 和 Secret Key将由随机生成和提供</p>
<h2 id='9cea884c66'><span id="a3">发起请求</span></h2>
<p>所有REST请求都必须包含以下标题：</p>

<ul>
<li>ACCESS-KEY API KEY作为一个字符串。</li>
<li>ACCESS-SIGN 使用base64编码签名（请参阅签名消息）。</li>
<li>ACCESS-TIMESTAMP 作为您的请求的时间戳。</li>
</ul>
<h2 id='d2279731bb'><span id="a4">签名</span></h2>
<p>生成待签名的字符串
    -   <a href="#open-api-java">open-api Demo</a></p>

<p>1、先将参数以其参数名的字典序升序进行排序</p>

<p>2、遍历排序后的字典，将所有参数按&quot;keyvalue&quot;格式拼接在一起（非空参数）</p>

<p>3、使用MD5对待签名串求签</p>

<p>例：</p>

<p>api_key = 1234567</p>

<p>time = 12312312312137</p>

<p>secret_key = 789654</p>

<p>sign=md5(api_key1234567time12312312312137789654)</p>
<h2 id='f9ce6006dc'><span id="a6">请求交互</span></h2>
<p>REST访问的根URL：<code>https://openapi.wbf.live</code></p>
<h3 id='e463496b53'><span id="a7">请求</span></h3>
<p>所有请求基于Https协议，请求头信息中Content-Type 需要统一设置为:&#39;application/x-www-form-urlencoded’。</p>

<p><strong>请求交互说明</strong></p>

<p>1、请求参数：根据接口请求参数规定进行参数封装。</p>

<p>2、提交请求参数：将封装好的请求参数通过POST/GET/DELETE等方式提交至服务器。</p>

<p>3、服务器响应：服务器首先对用户请求数据进行参数安全校验，通过校验后根据业务逻辑将响应数据以JSON格式返回给用户。</p>

<p>4、数据处理：对服务器响应数据进行处理。</p>

<p><strong>成功</strong></p>

<p>HTTP状态码200表示成功响应，并可能包含内容。如果响应含有内容，则将显示在相应的返回内容里面。</p>

<p><strong>常见错误码</strong></p>

<ul>
<li><p>400 Bad Request – Invalid request forma 请求格式无效</p></li>
<li><p>401 Unauthorized – Invalid API Key 无效的API Key</p></li>
<li><p>403 Forbidden – You do not have access to the requested resource 请求无权限</p></li>
<li><p>404 Not Found 没有找到请求</p></li>
<li><p>429 Too Many Requests 请求太频繁被系统限流</p></li>
<li><p>500 Internal Server Error – We had a problem with our server 服务器内部错误</p></li>
</ul>

<p>如果失败，response body 带有错误描述信息, 对应的状态码描述如下：
| 状态码 | 说明                             | 备注                       |
| ------ | -------------------------------- | -------------------------- |
| 0      | 成功                             | code=0 成功， code &gt;0 失败 |
| 1      | 系统错误                         |                            |
| 2      | 参数错误                         |                            |
| 3      | 用户未登录                       |                            |
| 4      | 余额不足                         |                            |
| 5      | 下单失败                         |                            |
| 6      | 数量小于最小值                   |                            |
| 7      | 数量大于最大值                   |                            |
| 8      | 订单取消失败                     |                            |
| 9      | 交易被冻结                       |                            |
| 11     | 短信验证码错误或过期             |                            |
| 12     | 未知的代币代号                   |                            |
| 14     | 验证码错误                       |                            |
| 19     | 可用余额不足                     |                            |
| 21     | 谷歌验证码错误或过期             |                            |
| 22     | 订单不存在                       |                            |
| 25     | 价格或数量精度超过最大限制       |                            |
| 26     | 用户不存在                       |                            |
| 28     | 邮箱验证码错误或过期             |                            |
| 31     | 价格或者金额小于最小值           |                            |
| 32     | 价格超出当日涨跌停范围，无法下单 |                            |
| 33     | 订单委托量超出最大限制           |                            |
| 34     | 下单超过频率限制                 |                            |
| 10069  | 涨跌停限制币对,不允许下市价单    |                            |
| 100100 | 用户名或密码错误                 |                            |
| 100101 | 用户登陆锁定两小时               |                            |
| 100102 | 用户被冻结                       |                            |
| 101115 | 当前交易量超出用户单日交易上限   |                            |
| 101117 | 当前币种不允许市价交易           |                            |
| 101999 | 该币种未开启                     |                            |</p>
<h3 id='594f3cdd9d'><span  id="a8">分页</span></h3>
<p>部分返回数据集的REST请求支持使用游标分页。 游标分页允许在结果的当前页面之前和之后获取结果，并且非常适合于实时数据。根据当前的返回结果，后续请求可以在此基础之上指定请求数据的方向，可以请求在这之前和之后的数据。before和after游标可通过响应头CB_BEFORE和CB_AFTER使用。</p>

<p><strong>例子</strong></p>

<p><code>GET /orders?before=2&amp;limit=30</code></p>
<h2 id='04ca77abba'><span id="a9">标准规范</span></h2><h3 id='4baad3dffc'><span id="b1">时间戳</span></h3>
<p>除非另外指定，API中的所有时间戳均以微秒为单位返回。</p>

<p>请求签名中的ACCESS-TIMESTAMP的单位是秒，允许用小数表示更精确的时间。请求的时间戳必须在API服务时间的30秒内，否则请求将被视为过期并被拒绝。如果本地服务器时间和API服务器时间之间存在较大的偏差，那么我们建议您使用通过查询API服务器时间来更新http header。</p>
<h3 id='59edbd491a'><span id="b2">例子</span></h3>
<p>1524801032573</p>
<h3 id='8ae9853514'><span id="b3">数字</span></h3>
<p>为了保持跨平台时精度的完整性，十进制数字作为字符串返回。建议您在发起请求时也将数字转换为字符串以避免截断和精度错误。</p>

<p>整数（如交易编号和顺序）不加引号。</p>
<h3 id='f267c470f1'><span id="b4">限流</span></h3>
<p>如果请求过于频繁系统将自动限制请求，并在http header中返回429 too many requests状态码。</p>

<p>REST API</p>

<ul>
<li><p>公共接口：我们通过IP限制公共接口的调用：每2秒最多6个请求。</p></li>
<li><p>私人接口：我们通过用户ID限制私人接口的调用：每秒最多10个请求。</p></li>
<li><p>某些接口的特殊限制在具体的接口上注明</p></li>
</ul>
<h1 id='api-2'>业务API参考</h1><h2 id='open-api'><span id="b6">open-api</span></h2><h3 id='7c2f2901d7'><span id="1">资产余额</span></h3>
<ol>
<li>接口地址: /open/api/user/account</li>
<li>接口说明: (get请求)资产余额</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>{<br>&quot;total_asset&quot;:432323.23,<br>&quot;coin_list&quot;:[<br>{&quot;coin&quot;:&quot;btc&quot;,&quot;normal&quot;:32323.233,&quot;locked&quot;:32323.233,&quot;btcValuatin&quot;:112.33},<br>{&quot;coin&quot;:&quot;ltc&quot;,&quot;normal&quot;:32323.233,&quot;locked&quot;:32323.233,&quot;btcValuatin&quot;:112.33},<br>{&quot;coin&quot;:&quot;bch&quot;,&quot;normal&quot;:32323.233,&quot;locked&quot;:32323.233,&quot;btcValuatin&quot;:112.33},<br>]<br>}<br></td>
<td>total_asset:总资产<br>normal:余额账户<br>locked：冻结账户<br>btcValuatin：BTC估值</td>
</tr>
</tbody></table>
<h3 id='d2d71942b1'><span id="2">获取全部委托</span></h3>
<ol>
<li>接口地址:/open/api/v2/all_order</li>
<li>接口说明:(get请求)获取全部委托</li>
</ol>

<ul>
<li><p>旧接口 /open/api/all_order 仍保留,但已经不建议使用</p></li>
<li><p>v2版本变化: 去掉了结果返回值中的tradeList成交记录,提升效率;如果需要单一订单的成交信息,可以使用 /open/api/order_info 接口单独去查</p></li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，btcusdt，详情看下面</td>
</tr>
<tr>
<td>startDate</td>
<td>选填</td>
<td>（新增）开始时间，精确到秒“yyyy-MM-dd mm:hh:ss”</td>
</tr>
<tr>
<td>endDate</td>
<td>选填</td>
<td>（新增）结束时间，精确到秒“yyyy-MM-dd mm:hh:ss”</td>
</tr>
<tr>
<td>pageSize</td>
<td>选填</td>
<td>页面大小</td>
</tr>
<tr>
<td>page</td>
<td>选填</td>
<td>页码</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下:</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">orderList</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">total_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510993841000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">avg_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">countCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">买入</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">WEB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">完全成交</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">424</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">remain_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">baseCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">SELL</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">total_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.09900000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510993715000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">avg_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">countCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">卖出</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.09900000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">WEB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">完全成交</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">423</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">remain_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">baseCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
<td>bccusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>usdt</td>
<td>usdtcny</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='604667704d'><span id="3">获取全部成交记录</span></h3>
<ol>
<li>接口地址:/open/api/all_trade</li>
<li>接口说明:(get请求)获取全部成交记录</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，btcusdt，详情看下面</td>
</tr>
<tr>
<td>startDate</td>
<td>选填</td>
<td>（新增）开始时间，精确到秒“yyyy-MM-dd HH:mm:ss”</td>
</tr>
<tr>
<td>endDate</td>
<td>选填</td>
<td>（新增）结束时间，精确到秒“yyyy-MM-dd HH:mm:ss”</td>
</tr>
<tr>
<td>pageSize</td>
<td>选填</td>
<td>页面大小</td>
</tr>
<tr>
<td>page</td>
<td>选填</td>
<td>页码</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sort</td>
<td>选填</td>
<td>1表示倒序</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下:</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span><span class="mi">22</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">resultList</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">feeCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">YLB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.16431104</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ctime</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510996571195</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">306</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">买入</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1002</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span>

        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.850</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">feeCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">YLB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.13966438</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ctime</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510996571190</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.08500000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">305</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">买入</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1002</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.010</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">feeCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">YLB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00164311</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ctime</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510995560344</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00100000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">291</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">买入</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">1002</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">bid_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">ask_user_id</span><span class="dl">"</span><span class="p">:</span><span class="mi">10001</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
<td>bccusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>usdt</td>
<td>usdtcny</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h3 id='debd6c0464'><span id="4">取消委托单</span></h3>
<ol>
<li>接口地址:/open/api/cancel_order</li>
<li>接口说明:(post请求)取消委托单</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>必填</td>
<td>订单ID</td>
</tr>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，ethbtc，详情看下面</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>“”</td>
<td></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny（xxx101）</th>
<th>xxx-btc（xxx201）</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
</tr>
</tbody></table>
<h3 id='a38725e807'><span id="5">根据币对取消全部委托单</span></h3>
<ol>
<li>接口地址:/open/api/cancel_order_all</li>
<li>接口说明:(post请求)根据币对取消全部委托单（最多取消两千条，多余两千请循环撤销）</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，ethbtc，详情看下面</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>“”</td>
<td></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny（xxx101）</th>
<th>xxx-btc（xxx201）</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
</tr>
</tbody></table>
<h3 id='df83685cc8'><span id="6">创建订单</span></h3>
<ol>
<li>接口地址:/open/api/create_order</li>
<li>接口说明:(post请求)创建订单</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>side</td>
<td>必填</td>
<td>买卖方向BUY、SELL</td>
</tr>
<tr>
<td>type</td>
<td>必填</td>
<td>挂单类型，1:限价委托、2:市价委托</td>
</tr>
<tr>
<td>volume</td>
<td>必填</td>
<td>购买数量（多义，复用字段）<br>type=1:表示买卖数量<br>type=2:买则表示总价格，卖表示总个数<br>买卖限制user/me-用户信息</td>
</tr>
<tr>
<td>price</td>
<td>选填</td>
<td>委托单价：type=2：不需要此参数</td>
</tr>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，ethbtc</td>
</tr>
<tr>
<td>fee_is_user_exchange_coin</td>
<td>选填</td>
<td>（冗余字段，忽略）0，当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>{&quot;order_id&quot;:34343}</td>
<td>成功返回交易ID</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny（xxx101）</th>
<th>xxx-btc（xxx201）</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
</tr>
</tbody></table>
<h3 id='4c9de00a78'><span id="7">获取所有交易对行情</span></h3>
<ol>
<li>接口地址:/open/api/get_allticker</li>
<li>接口说明:(get请求)获取所有交易对行情</li>
</ol>

<ul>
<li>该接口不进行签名校验</li>
<li>参数:无</li>
</ul>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td>返回值说明<br>date: 返回数据时服务器时间 <br>symbol: 交易对（交易对1(base)简称_交易对2(quote)简称） <br>buy: 买一价 <br>high: 最高价 <br>last: 最新成交价 <br>low: 最低价 <br>sell: 卖一价 <br>vol: 成交量(最近的24小时)<br>rose:涨跌幅</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
   <span class="dl">"</span><span class="s2">date</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1534335607859</span><span class="p">,</span>
   <span class="dl">"</span><span class="s2">ticker</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btcusdt</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mf">7408.35984546</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mf">7408.35984546</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">3700.00000000</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">7408.35984546</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span>
     <span class="p">},</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ethusdt</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mf">535.96</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mf">6366.8591</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mf">279.57</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.44564773</span>
     <span class="p">},</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bchusdt</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">11.00</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">9.00</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span>
     <span class="p">},</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ethbtc</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mi">281261</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.044039</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0.044049</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0.044049</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.00022701</span>
     <span class="p">},</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">nobbtc</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.007419</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1998</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.007419</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0.00741900</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="mi">0</span>
     <span class="p">},</span>
     <span class="p">{</span>
       <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ltceth</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.18519949</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.00000000</span><span class="dl">"</span><span class="p">,</span>
       <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0.18328001</span><span class="dl">"</span>
     <span class="p">}</span>
   <span class="p">]</span>
 <span class="p">}</span>
</code></pre></div><h3 id='k'><span id="8">获取K线数据</span></h3>
<ol>
<li>接口地址:/open/api/get_records</li>
<li>接口说明:(get请求)获取K线数据</li>
</ol>

<ul>
<li>该接口不进行签名校验</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，bchbtc，详情看下面</td>
</tr>
<tr>
<td>period</td>
<td>必填</td>
<td>单位为分钟，比喻1分钟则为1，一天则为1440</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>bch</td>
<td>bcccny</td>
<td>bchbtc</td>
<td>bchusdt</td>
</tr>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">[</span>
        <span class="p">[</span>
            <span class="mi">1514445780</span><span class="p">,</span>  <span class="c1">//时间戳</span>
            <span class="mf">1.12</span><span class="p">,</span>        <span class="c1">//开盘价</span>
            <span class="mf">1.12</span><span class="p">,</span>        <span class="c1">//最高</span>
            <span class="mf">1.12</span><span class="p">,</span>        <span class="c1">//最低</span>
            <span class="mf">1.12</span><span class="p">,</span>        <span class="c1">//收盘价</span>
            <span class="mi">0</span>            <span class="c1">//成交量</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="mi">1514445840</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mi">0</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="mi">1514445900</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mf">1.12</span><span class="p">,</span>
            <span class="mi">0</span>
        <span class="p">]</span>
<span class="p">]</span>
</code></pre></div><h3 id='32d30f799b'><span id="9">获取当前行情</span></h3>
<ol>
<li>接口地址:/open/api/get_ticker</li>
<li>接口说明:(get请求)获取当前行情</li>
</ol>

<ul>
<li>该接口不进行签名校验</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，btcusdt，详情看下面</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">high</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span><span class="c1">//最高值</span>
    <span class="dl">"</span><span class="s2">vol</span><span class="dl">"</span><span class="p">:</span> <span class="mf">10232.26315789</span><span class="p">,</span><span class="c1">//交易量</span>
    <span class="dl">"</span><span class="s2">last</span><span class="dl">"</span><span class="p">:</span> <span class="mf">173.60263169</span><span class="p">,</span><span class="c1">//最新成交价</span>
    <span class="dl">"</span><span class="s2">low</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span><span class="c1">//最低值</span>
    <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0.01000000</span><span class="dl">"</span><span class="p">,</span><span class="c1">//买一价</span>
    <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">1.12345680</span><span class="dl">"</span><span class="p">,</span><span class="c1">//卖一价</span>
    <span class="dl">"</span><span class="s2">rose</span><span class="dl">"</span><span class="p">:</span> <span class="o">-</span><span class="mf">0.44564773</span><span class="p">,</span><span class="c1">//涨跌幅</span>
    <span class="dl">"</span><span class="s2">time</span><span class="dl">"</span><span class="p">:</span> <span class="mi">1514448473626</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
<td>bccusdt</td>
</tr>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
</tbody></table>
<h3 id='d260ccba65'><span id="10">获取行情成交记录</span></h3>
<ol>
<li>接口地址:/open/api/get_trades</li>
<li>接口说明:(get请求)获取行情成交记录</li>
</ol>

<ul>
<li>该接口不进行签名校验</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，bchbtc，详情看下面</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.55</span><span class="p">,</span><span class="c1">//成交量</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.18519949</span><span class="p">,</span><span class="c1">//成交价</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">447121</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span><span class="c1">//买卖type，买为buy，买sell</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mf">16.45</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.18335468</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">447120</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.18335468</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">447119</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">buy</span><span class="dl">"</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span> <span class="mf">2.92</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span> <span class="mf">0.183324003</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span> <span class="mi">447118</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span>
        <span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>bch</td>
<td>bcccny</td>
<td>bchbtc</td>
<td>bchusdt</td>
</tr>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
</tbody></table>
<h3 id='e592a0b8d9'><span id="11">获取各个币对的最新成交价</span></h3>
<ol>
<li>接口地址:/open/api/market</li>
<li>接口说明:(get请求)获取各个币对的最新成交价</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>{&quot;btcusdt&quot;:15000,&quot;ethusdt&quot;:800}</td>
<td></td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
<td>bccusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
</tbody></table>
<h3 id='b9fa6c9f9f'><span id="12">查询买卖盘深度</span></h3>
<ol>
<li>接口地址:/open/api/market_dept</li>
<li>接口说明:(get请求)查询买卖盘深度</li>
</ol>

<ul>
<li>该接口不进行签名校验</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，ethbtc，详情看下面</td>
</tr>
<tr>
<td>type</td>
<td>必填</td>
<td>深度类型，step0, step1, step2（合并深度0-2）；step0时，精度最高</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>  
    <span class="dl">"</span><span class="s2">tick</span><span class="dl">"</span><span class="p">:{</span>
        <span class="dl">"</span><span class="s2">asks</span><span class="dl">"</span><span class="p">:[</span><span class="c1">//卖盘</span>
            <span class="p">{</span><span class="mf">22112.22</span><span class="p">,</span><span class="mf">0.9332</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
        <span class="p">],</span>
        <span class="dl">"</span><span class="s2">bids</span><span class="dl">"</span><span class="p">:[</span><span class="c1">//买盘</span>
            <span class="p">{</span><span class="mf">22111.22</span><span class="p">,</span><span class="mf">0.9332</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22111.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
            <span class="p">{</span><span class="mf">22112.21</span><span class="p">,</span><span class="mf">0.2</span><span class="p">},</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><h3 id='edfe9158e5'><span id="13">批量下单，同时批量撤回指定订单</span></h3>
<ol>
<li>接口地址:/open/api/mass_replace</li>
<li>接口说明:(post请求)批量下单，同时批量撤回指定订单</li>
</ol>

<ul>
<li>mass_place是需要发送到系统的一批限价订单，每次最多100条</li>
<li>mass_cancel是需要撤回的一批订单,每次最多100条</li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
<tr>
<td>symbol</td>
<td>必填</td>
<td>币种 ，例 btcusdt</td>
</tr>
<tr>
<td>mass_cancel</td>
<td>选填</td>
<td>[1234,234....] 撤单参数，订单id</td>
</tr>
<tr>
<td>mass_place</td>
<td>选填</td>
<td>[{side:&quot;BUY&quot;,type:&quot;1&quot;,volume:&quot;0.01&quot;,price:&quot;6400&quot;,fee_is_user_exchange_coin:&quot;0&quot;}, {}, …]<br>含义：<br>symbol:币种，例btcusdt<br>mass_place:下单参数。side：方向（买卖方向BUY、SELL），<br>--------------------------------type：类型（1:限价委托、2:市价委托）<br>--------------------------------volume：购买数量（多义，复用字段） type=1:表示买卖数量type=2:买则表示总价格，卖表示总个数<br>--------------------------------price：委托单价：type=2：不需要此参数<br>--------------------------------fee_is_user_exchange_coin：(冗余字段)当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>&quot;mass_place&quot;: [{&quot;order_id&quot;:&quot;1234&quot;,&quot;code&quot;:&quot;0&quot;, &quot;msg&quot;:&quot;suc&quot;}，...]<br>&quot;mass_cancel&quot;: [{&quot;order_id&quot;:&quot;1234&quot;,&quot;code&quot;:&quot;0&quot;, &quot;msg&quot;:&quot;suc&quot;}，.......]</td>
<td>下单返回：订单id，状态码，成功或失败信息。<br>撤单返回：订单id，状态码，成功或失败信息<br>0表示成功。</td>
</tr>
</tbody></table>
<h3 id='v2'><span id="27">批量下单，同时批量撤回指定订单-V2</span></h3>
<ol>
<li>接口地址:/open/api/mass_replaceV2</li>
<li>接口说明:(post请求)批量下单，同时批量撤回指定订单</li>
</ol>

<ul>
<li><p>mass_place是需要发送到系统的一批限价订单，每次最多1000条</p></li>
<li><p>mass_cancel是需要撤回的一批订单,每次最多1000条</p></li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
<tr>
<td>symbol</td>
<td>必填</td>
<td>币种 ，例 btcusdt</td>
</tr>
<tr>
<td>mass_cancel</td>
<td>选填</td>
<td>[1234,234....] 撤单参数，订单id</td>
</tr>
<tr>
<td>mass_place</td>
<td>选填</td>
<td>[{side:&quot;BUY&quot;,type:&quot;1&quot;,volume:&quot;0.01&quot;,price:&quot;6400&quot;,fee_is_user_exchange_coin:&quot;0&quot;}, {}, …]<br>含义：<br>symbol:币种，例btcusdt<br>mass_place:下单参数--&gt;side：方向（买卖方向BUY、SELL），<br>--------------------------------type：类型（1:限价委托、2:市价委托）<br>--------------------------------volume：购买数量（多义，复用字段） type=1:表示买卖数量type=2:买则表示总价格，卖表示总个数<br>--------------------------------price：委托单价：type=2：不需要此参数<br>--------------------------------fee_is_user_exchange_coin：(冗余字段)当交易所有平台币时，此参数表示是否使用用平台币支付手续费，0否，1是</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>&quot;mass_place&quot;: [{&quot;msg&quot;: &quot;Success&quot;,&quot;code&quot;: &quot;0&quot;,&quot;order_id&quot;: [504,505]},{&quot;msg&quot;: &quot;Order cancellation failed&quot;,&quot;code&quot;: &quot;8&quot;,&quot;order_id&quot;: [504,505]}]<br>&quot;mass_cancel&quot;: [{&quot;msg&quot;: &quot;Success&quot;,&quot;code&quot;: &quot;0&quot;,&quot;order_id&quot;: [572,573,574,626,629]}]</td>
<td>下单返回：订单id，状态码，成功或失败信息。<br>撤单返回：订单id，状态码，成功或失败信息<br>0表示成功。</td>
</tr>
</tbody></table>
<h3 id='3ae25b0ae0'><span id="14">获取当前委托</span></h3>
<ol>
<li>接口地址:/open/api/v2/new_order</li>
<li>接口说明:(get请求)获取当前委托（包括未成交和正在成交的委托）</li>
</ol>

<ul>
<li><p>旧接口 /open/api/new_order 仍保留,但已经不建议使用</p></li>
<li><p>v2版本变化: 去掉了结果返回值中的tradeList成交记录,提升效率;如果需要单一订单的成交信息,可以使用 /open/api/order_info 接口单独去查</p></li>
</ul>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>symbo</td>
<td>l    必填</td>
<td>市场标记，btcusdt，详情看下面</td>
</tr>
<tr>
<td>pageSize</td>
<td>选填</td>
<td>页面大小</td>
</tr>
<tr>
<td>page</td>
<td>选填</td>
<td>页码</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下:</td>
<td>订单状态(status)说明：<br>INIT(0,&quot;初始订单，未成交未进入盘口&quot;),<br>NEW_(1,&quot;新订单，未成交进入盘口&quot;),<br>FILLED(2,&quot;完全成交&quot;),<br>PART_FILLED(3,&quot;部分成交&quot;),<br>CANCELED(4,&quot;已撤单&quot;),<br>PENDING_CANCEL(5,&quot;待撤单&quot;),<br>EXPIRED(6,&quot;异常订单&quot;);</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">count</span><span class="dl">"</span><span class="p">:</span><span class="mi">10</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">resultList</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BUY</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">total_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510993841000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">avg_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">countCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">买入</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">WEB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">完全成交</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">424</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">remain_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">baseCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">SELL</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">total_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.09900000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="mi">1510993715000</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">avg_price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.10000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">countCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">side_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">卖出</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.09900000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">source_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">WEB</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">完全成交</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">423</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">remain_volume</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">0.00000000</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">baseCoin</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span><span class="mi">2</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<table><thead>
<tr>
<th>虚拟币编号</th>
<th>xxx-cny</th>
<th>xxx-btc</th>
<th>xxx-usdt</th>
</tr>
</thead><tbody>
<tr>
<td>btc</td>
<td>btccny</td>
<td>-</td>
<td>btcusdt</td>
</tr>
<tr>
<td>eth</td>
<td>ethcny</td>
<td>ethbtc</td>
<td>ethusdt</td>
</tr>
<tr>
<td>ltc</td>
<td>ltccny</td>
<td>ltcbtc</td>
<td>ltcusdt</td>
</tr>
<tr>
<td>bcc</td>
<td>bcccny</td>
<td>bccbtc</td>
<td>bccusdt</td>
</tr>
<tr>
<td>etc</td>
<td>etccny</td>
<td>etcbtc</td>
<td>etcusdt</td>
</tr>
<tr>
<td>usdt</td>
<td>usdtcny</td>
<td>-</td>
<td>-/web/new_order-获取当前委托</td>
</tr>
</tbody></table>
<h3 id='5e1d8c8f3b'><span id="15">获取订单详情</span></h3>
<ol>
<li>接口地址:/open/api/order_info</li>
<li>接口说明:(get请求)获取订单详情</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>order_id</td>
<td>必填</td>
<td>订单ID</td>
</tr>
<tr>
<td>symbol</td>
<td>必填</td>
<td>市场标记，ethbtc，详情看下面</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下:</td>
<td>订单状态(status)说明：<br>INIT(0,&quot;初始订单，未成交未进入盘口&quot;),<br>NEW_(1,&quot;新订单，未成交进入盘口&quot;),<br>FILLED(2,&quot;完全成交&quot;),<br>PART_FILLED(3,&quot;部分成交&quot;),<br>CANCELED(4,&quot;已撤单&quot;),<br>PENDING_CANCEL(5,&quot;待撤单&quot;),<br>EXPIRED(6,&quot;异常订单&quot;);</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">order_info</span><span class="dl">"</span><span class="p">:{</span>
        <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">343</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">side</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">sell</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">side_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">卖出</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1592461624033</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">deal_volume</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">total_price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">source</span><span class="dl">"</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">source_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">API</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">status</span><span class="dl">"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span> 
        <span class="dl">"</span><span class="s2">status_msg</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">未成交</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">avg_price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">}</span>
    <span class="p">}</span>
    <span class="dl">"</span><span class="s2">trade_list</span><span class="dl">"</span><span class="p">:[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">343</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1592461624033</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">:</span><span class="mi">345</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">1592461624033</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">volume</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">deal_price</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="mf">222.33</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h3 id='140f5e499a'><span id="17">查询系统支持的所有交易对及精度</span></h3>
<ol>
<li>接口地址:/open/api/common/symbols</li>
<li>接口说明:(get请求)查询系统支持的所有交易对及精度</li>
</ol>

<ul>
<li>参数:无</li>
</ul>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td>symbol 交易对<br>base_coin 基础币种<br>count_coin 计价货币<br>price_precision 价格精度位数（0为个位）<br>amount_precision 数量精度位数（0为个位）</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">code</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">msg</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">suc</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ethbtc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ltcbtc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ltc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bchbtc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">bch</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">etcbtc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">btc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">etc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ltceth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">ltc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">etceth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">count_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">eth</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">amount_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">base_coin</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">etc</span><span class="dl">"</span><span class="p">,</span>
            <span class="dl">"</span><span class="s2">price_precision</span><span class="dl">"</span><span class="p">:</span> <span class="mi">8</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h3 id='8dbd99835a'><span id="18">获取用户资产以及充值记录</span></h3>
<ol>
<li>接口地址:/open/api/user_balance_info</li>
<li>接口说明:(post请求)获取用户资产以及充值记录</li>
</ol>

<table><thead>
<tr>
<th>参数</th>
<th>填写类型</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>uid</td>
<td>选填</td>
<td>用户uid（用户uid,mobile_number,email三者必须填其中一个）</td>
</tr>
<tr>
<td>mobile_number</td>
<td>选填</td>
<td>查询的用户号码，手机号码或者邮箱</td>
</tr>
<tr>
<td>email</td>
<td>选填</td>
<td>用户邮箱</td>
</tr>
<tr>
<td>api_key</td>
<td>必填</td>
<td>api_key</td>
</tr>
<tr>
<td>time</td>
<td>必填</td>
<td>时间戳</td>
</tr>
<tr>
<td>sign</td>
<td>必填</td>
<td>签名</td>
</tr>
</tbody></table>

<p>返回值:</p>

<table><thead>
<tr>
<th>字段</th>
<th>实例</th>
<th>解释</th>
</tr>
</thead><tbody>
<tr>
<td>code</td>
<td>0</td>
<td>“0” - &gt; 成功<br>“100004” -&gt;参数不合法<br>“100005” -&gt; 签名错误<br>“100007” -&gt; 非法IP<br>&quot;110032&quot; -&gt; 用户无查询权限<br>“110020” -&gt; 要查询的用户不存在</td>
</tr>
<tr>
<td>msg</td>
<td>&quot;suc&quot;</td>
<td>code&gt;0失败</td>
</tr>
<tr>
<td>data</td>
<td>如下：</td>
<td>balance_info 各个币种的资产信息<br>deposit_list 充值的流水信息</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span>
<span class="dl">"</span><span class="s2">balance_info</span><span class="dl">"</span><span class="p">:[</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">balance</span><span class="dl">"</span><span class="p">:</span><span class="mf">124.12</span>
    <span class="p">},...</span>
<span class="p">],</span>
<span class="dl">"</span><span class="s2">deposit_list</span><span class="dl">"</span><span class="p">:[</span>
    <span class="p">{</span>
        <span class="dl">"</span><span class="s2">uid</span><span class="dl">"</span><span class="p">:</span><span class="mi">17203</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">symbol</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">BTC</span><span class="dl">"</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">fee</span><span class="dl">"</span><span class="p">:</span><span class="mf">0.00005</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">amount</span><span class="dl">"</span><span class="p">:</span><span class="mf">12.02</span><span class="p">,</span>
        <span class="dl">"</span><span class="s2">created_at</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">2018-11-14 15:37:51</span><span class="dl">"</span>
    <span class="p">},...</span>
<span class="p">]</span>
<span class="p">}</span>
</code></pre></div><h2 id='ws-api'><span id="b7">ws-api</span></h2><h3 id='k-2'><span id="19">订阅-K线行情</span></h3>
<ul>
<li>请求:
<code>javascript
{&quot;event&quot;:&quot;sub&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_kline_[1min/5min/15min/30min/60min/1day/1week/1month]&quot;,&quot;cb_id&quot;:&quot;自定义&quot;}}
</code>javascript</li>
<li>返回订阅状态1次:
<code>
{&quot;event_rep&quot;:&quot;subed&quot;,&quot;channel&quot;:&quot;market_$base$quote_kline_[1min/5min/15min/30min/60min/1day/1week/1month]&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;}
</code>javascript</li>
<li>持续返回订阅消息:
<code>javascript
{
&quot;channel&quot;:&quot;market_$base$quote_kline_[1min/5min/15min/30min/60min/1day/1week/1month]&quot;,//订阅的交易对行情$base$quote表示btckrw等
&quot;ts&quot;:1506584998239,//请求时间
&quot;tick&quot;:{
    &quot;id&quot;:1506602880,//时间刻度起始值
    &quot;amount&quot;:123.1221,//交易额
    &quot;vol&quot;:1212.12211,//交易量
    &quot;open&quot;:2233.22,//开盘价
    &quot;close&quot;:1221.11,//收盘价
    &quot;high&quot;:22322.22,//最高价
    &quot;low&quot;:2321.22//最低价
}
}
</code></li>
</ul>
<h3 id='24'><span id="20">订阅-前24小时行情</span></h3>
<!-- * 请求: -->
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="p">{</span><span class="dl">"</span><span class="s2">event</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">sub</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">params</span><span class="dl">"</span><span class="p">:{</span><span class="dl">"</span><span class="s2">channel</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">market_$base$quote_ticker</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">cb_id</span><span class="dl">"</span><span class="p">:</span><span class="dl">"</span><span class="s2">自定义</span><span class="dl">"</span><span class="p">}}</span>
</code></pre></div>
<ul>
<li>返回订阅状态1次:
```javascript
{&quot;event_rep&quot;:&quot;subed&quot;,&quot;channel&quot;:&quot;market_$base$quote_ticker&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;,&quot;lower_frame&quot;:&quot;0&quot;} // lower_frame: 0 币对没下架、 1 币对下架</li>
</ul>
<div class="highlight"><pre class="highlight javascript tab-javascript"><code><span class="o">*</span> <span class="err">持续返回订阅消息</span><span class="p">:</span>
<span class="s2">```javascript
{
    "channel":"market_$base$quote_ticker",//订阅的交易对行情$base$quote表示btckrw等
    "ts":1506584998239,//请求时间
    "tick":{
        "id":1506584998,//冗余，无实际意义，时间戳
        "amount":123.1221,//交易额
        "vol":1212.12211,//交易量
        "open":2233.22,//开盘价
        "close":1221.11,//收盘价
        "high":22322.22,//最高价
        "low":2321.22,//最低价
        "rose":-0.2922,//涨幅
        "ts":1506584998239,//数据产生时间
        "lower_frame":"0"
    }
}
</span></code></pre></div><h3 id='7e5bd7fce9'><span id="21">订阅-深度盘口（高频）</span></h3>
<ul>
<li>请求:
<code>
{&quot;event&quot;:&quot;sub&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,&quot;cb_id&quot;:&quot;自定义&quot;,&quot;asks&quot;:150,&quot;bids&quot;:150}}
</code></li>
<li><p>返回订阅状态1次:
<code>
{&quot;event_rep&quot;:&quot;subed&quot;,&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;asks&quot;:150,&quot;bids&quot;:150,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;}
</code></p></li>
<li><p>注：第一次订阅成功会立刻返回一次全量数据， 另外server也会定期推个全量数据给前端  避免数据出问题</p></li>
<li><p>全量：前端直接替换原有盘口
<code>javascript
{
&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,//$base$quote表示btckrw等,深度有3个维度，0、1、2
&quot;ts&quot;:1506584998239,//请求时间
&quot;tick&quot;:{
    &quot;asks&quot;:[//卖盘
        [22112.22,0.9332],
        [22112.21,0.2],
    ],
    &quot;buys&quot;:[//买盘
        [22111.22,0.9332],
        [22111.21,0.2],
    ]
}
}
</code>javascript</p></li>
<li><p>注： 增量盘口信息 前端只需要替换价格对应的数量即可， volume=0时删除， price与原有盘口某个价格段的price相等时更新volume,  新的price直接新增</p></li>
<li><p>增量盘口信息（该盘口变化的价格段）
<code>javascript
{
&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,//$base$quote表示btckrw等,深度有3个维度，0、1、2
&quot;ts&quot;:1506584998239,//请求时间
&quot;tick&quot;:{
    &quot;side&quot;: &quot;asks&quot;, 买卖盘方向  asks： 卖盘  buys: 买盘  
    &quot;price&quot; : 133.55,  盘口对应的某个价格段
    &quot;volume&quot; : 44.22   价格段对应的数量
}
}
</code></p></li>
</ul>
<h3 id='c825d2a6c4'><span id="22">订阅-深度盘口</span></h3>
<ul>
<li>请求:
<code>
{&quot;event&quot;:&quot;sub&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,&quot;cb_id&quot;:&quot;自定义&quot;,&quot;asks&quot;:150,&quot;bids&quot;:150}}
</code></li>
<li>返回订阅状态1次:
<code>
{&quot;event_rep&quot;:&quot;subed&quot;,&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;asks&quot;:150,&quot;bids&quot;:150,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;}
</code></li>
<li>持续返回订阅消息:
<code>
{
&quot;channel&quot;:&quot;market_$base$quote_depth_step[0-2]&quot;,//$base$quote表示btckrw等,深度有3个维度，0、1、2
&quot;ts&quot;:1506584998239,//请求时间
&quot;tick&quot;:{
    &quot;asks&quot;:[//卖盘
        [22112.22,0.9332],
        [22112.21,0.2]
    ],
    &quot;buys&quot;:[//买盘
        [22111.22,0.9332],
        [22111.21,0.2]
    ]
}
}
</code></li>
</ul>
<h3 id='a3f68bd2a5'><span id="23">订阅-实时成交信息 </span></h3>
<ul>
<li>请求:
<code>
{&quot;event&quot;:&quot;sub&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_trade_ticker&quot;,&quot;cb_id&quot;:&quot;自定义&quot;}}
</code></li>
<li>返回订阅状态1次:
<code>
{&quot;event_rep&quot;:&quot;subed&quot;,&quot;channel&quot;:&quot;market_$base$quote_trade_ticker&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;}
</code></li>
<li>持续返回订阅消息:
<code>
{
&quot;channel&quot;:&quot;market_$base$quote_trade_ticker&quot;,//订阅的交易对行情$base$quote表示btckrw等
&quot;ts&quot;:1506584998239,//请求时间
&quot;tick&quot;:{
    &quot;id&quot;:12121,//data中最大交易ID
    &quot;ts&quot;:1506584998239,//data中最大时间
    &quot;data&quot;:[
        {
            &quot;id&quot;:12121,//交易ID
            &quot;side&quot;:&quot;buy&quot;,//买卖方向buy,sell
            &quot;price&quot;:32.233,//单价
            &quot;vol&quot;:232,//数量
            &quot;amount&quot;:323,//总额
            &quot;ts&quot;:1506584998239,//数据产生时间
            &quot;ds&quot;:&#39;2017-09-10 23:12:21&#39;
        },
        {
            &quot;id&quot;:12120,//交易ID
            &quot;side&quot;:&quot;buy&quot;,//买卖方向buy,sell
            &quot;price&quot;:32.233,//单价
            &quot;vol&quot;:232,//数量
            &quot;amount&quot;:323,//总额
            &quot;ts&quot;:1506584998239,//数据产生时间
            &quot;ds&quot;:&#39;2017-09-10 23:12:21&#39;
        }
    ]
}
}
</code></li>
</ul>
<h3 id='k-3'><span id="24">请求-K线历史数据</span></h3>
<ul>
<li><p>增加请求参数endIdx，pageSize（最多300，默认300条数据）,如果endIdx为空，则返回最近300条历史数据</p></li>
<li><p>请求:
<code>
{&quot;event&quot;:&quot;req&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_kline_[1min/5min/15min/30min/60min/1day/1week/1month]&quot;,&quot;cb_id&quot;:&quot;自定义&quot;,&quot;since&quot;:&quot;1506602880&quot;}}//since缺省时返回最新300条，有值时返回大于since的最多1小时数据，since有强校验，不能早于当前1小时  since取到59
</code></p></li>
<li><p>返回一次历史数据:
<code>
{
&quot;event_rep&quot;:&quot;rep&quot;,&quot;channel&quot;:&quot;market_$base$quote_kline_[1min/5min/15min/30min/60min/1day/1week/1month]&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,
&quot;since&quot;:&quot;1506602880&quot;,//since缺省时返回最新300条，有值时返回大于since的最多1小时数据，since有强校验，不能早于当前1小时
&quot;ts&quot;:1506584998239,//请求时间
&quot;data&quot;:[//300条
    {
        &quot;id&quot;:1506602880,//时间刻度起始值
        &quot;amount&quot;:123.1221,//交易额
        &quot;vol&quot;:1212.12211,//交易量
        &quot;open&quot;:2233.22,//开盘价
        &quot;close&quot;:1221.11,//收盘价
        &quot;high&quot;:22322.22,//最高价
        &quot;low&quot;:2321.22//最低价
    },
    {
        &quot;id&quot;:1506602880,//时间刻度起始值
        &quot;amount&quot;:123.1221,//交易额
        &quot;vol&quot;:1212.12211,//交易量
        &quot;open&quot;:2233.22,//开盘价
        &quot;close&quot;:1221.11,//收盘价
        &quot;high&quot;:22322.22,//最高价
        &quot;low&quot;:2321.22//最低价
    }
]
}
</code></p></li>
</ul>
<h3 id='dc4d04972a'><span id="25">请求-成交历史数据 </span></h3>
<ul>
<li>请求:
<code>
{&quot;event&quot;:&quot;req&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;market_$base$quote_trade_ticker&quot;,&quot;cb_id&quot;:&quot;自定义&quot;,&quot;top&quot;:200}}
</code></li>
<li>直接返回成交信息:
<code>
{
&quot;event_rep&quot;:&quot;rep&quot;,&quot;channel&quot;:&quot;market_$base$quote_trade_ticker&quot;,&quot;cb_id&quot;:&quot;原路返回&quot;,&quot;ts&quot;:1506584998239,&quot;status&quot;:&quot;ok&quot;,
&quot;top&quot;:200,//最大支持200
&quot;data&quot;:[
    {
        &quot;id&quot;:12121,//交易ID
        &quot;side&quot;:&quot;buy&quot;,//买卖方向buy,sell
        &quot;price&quot;:32.233,//单价
        &quot;vol&quot;:232,//数量
        &quot;amount&quot;:323,//总额
        &quot;ts&quot;:1506584998239//数据产生时间
    },
    {
        &quot;id&quot;:12120,//交易ID
        &quot;side&quot;:&quot;buy&quot;,//买卖方向buy,sell
        &quot;price&quot;:32.233,//单价
        &quot;vol&quot;:232,//数量
        &quot;amount&quot;:323,//总额
        &quot;ts&quot;:1506584998239,//数据产生时间
        &quot;ds&quot;:&#39;2017-09-10 23:12:21&#39;
    }
]
}
</code></li>
</ul>
<h3 id='24-2'><span id="26">请求-首页24行情数据</span></h3>
<ul>
<li>请求方式:
<code>
{&quot;event&quot;:&quot;req&quot;,&quot;params&quot;:{&quot;channel&quot;:&quot;review&quot;}}
</code></li>
<li>返回数据示例:
<code>
{
event_rep: &quot;rep&quot;,
channel: &quot;review&quot;,
data: {
      bchbtc:  {amount: &quot;115.968833484&quot;close: &quot;0.07956&quot;high: &quot;0.086323&quot;low: &quot;0.079251&quot;open: &quot;0.086323&quot;rose: &quot;-0.07834528&quot;vol: &quot;1393.247&quot;}
      bchusdt: {amount: &quot;416316.164145661&quot;, close: &quot;513.56&quot;, high: &quot;556.42&quot;, low: &quot;510.85&quot;, open: &quot;555.71&quot;, …}
      btcusdt: {amount: &quot;999341.34124&quot;, close: &quot;6450.18&quot;, high: &quot;6486.39&quot;, low: &quot;6359.63&quot;, open: &quot;6435.79&quot;, …}
}
}
</code></li>
</ul>
<h2 id='open-api-demo-java'><span id="open-api-java">open-api Demo（java） </span></h2><div class="highlight"><pre class="highlight java tab-java"><code>
<span class="kn">package</span> <span class="nn">com.exchange.stats.action</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.InputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.MessageDigest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.NoSuchAlgorithmException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map.Entry</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Set</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.TreeMap</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.commons.httpclient.HttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.httpclient.methods.GetMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.httpclient.methods.PostMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.commons.io.IOUtils</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="cm">/**
     * @param args
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
<span class="cm">/** 4个变量，api_key,secret_key */</span> 
 <span class="nc">String</span> <span class="n">api_key</span> <span class="o">=</span> <span class="s">"9750*****************65d1"</span><span class="o">;</span>
 <span class="nc">String</span> <span class="n">secret_key</span> <span class="o">=</span> <span class="s">"1c16******************2982"</span><span class="o">;</span>

        <span class="cm">/** 封装需要签名的参数 */</span>
        <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TreeMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;();</span>
        <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"api_key"</span><span class="o">,</span> <span class="n">api_key</span><span class="o">);</span>
        <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"time"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">().</span><span class="na">getTime</span><span class="o">()</span> <span class="o">+</span> <span class="s">""</span><span class="o">);</span>
        <span class="cm">/** 拼接签名字符串，md5签名 */</span>
        <span class="nc">StringBuilder</span> <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="nc">Set</span><span class="o">&lt;</span><span class="nc">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">entrys</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="na">entrySet</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">param</span> <span class="o">:</span> <span class="n">entrys</span><span class="o">)</span> <span class="o">{</span>
            <span class="cm">/** 去掉签名字段 */</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span><span class="o">().</span><span class="na">equals</span><span class="o">(</span><span class="s">"sign"</span><span class="o">))</span> <span class="o">{</span>
                <span class="k">continue</span><span class="o">;</span>
            <span class="o">}</span><span class="nl">https:</span><span class="c1">//openapi.wbf.info </span>

            <span class="cm">/** 空参数不参与签名 */</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getValue</span><span class="o">()</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
                <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">param</span><span class="o">.</span><span class="na">getValue</span><span class="o">().</span><span class="na">toString</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="n">result</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">secret_key</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">sign</span> <span class="o">=</span> <span class="n">getMD5</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="n">params</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"sign"</span><span class="o">,</span> <span class="n">sign</span><span class="o">);</span>

        <span class="cm">/** http请求 */</span>
        <span class="nc">String</span> <span class="n">resultJson</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="s">"https://openapi.wbfex.com/open/api/get_trades?symbol=btcusdt"</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">resultJson</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 通过post来提交数据，带参数的方法
     *
     * @param url    请求地址
     * @param params 参数
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">post</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="nc">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpClient</span><span class="o">();</span>
            <span class="nc">PostMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostMethod</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
            <span class="c1">//设定请求头的样式 </span>
            <span class="n">method</span><span class="o">.</span><span class="na">setRequestHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/x-www-form-urlencoded;charset=utf-8"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">params</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">params</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">params</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
                    <span class="n">method</span><span class="o">.</span><span class="na">setParameter</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="kt">int</span> <span class="n">code</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">executeMethod</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">code</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getResponseBodyAsStream</span><span class="o">();</span>
                <span class="n">str</span> <span class="o">=</span> <span class="nc">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
<span class="c1">// TODO Auto-generated catch block </span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">str</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 通过get来提交数据，带参数的方法
     *
     * @param url    请求地址
     * @param params 参数
     * @return
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">get</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">params</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">params</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">params</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="nc">Map</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">params</span><span class="o">.</span><span class="na">entrySet</span><span class="o">())</span> <span class="o">{</span>
                    <span class="k">if</span> <span class="o">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s">"?"</span><span class="o">;</span>
                    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s">"&amp;"</span><span class="o">;</span>
                    <span class="o">}</span>
                    <span class="n">url</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">()</span> <span class="o">+</span> <span class="s">"="</span> <span class="o">+</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">();</span>
                    <span class="n">x</span><span class="o">++;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="nc">HttpClient</span> <span class="n">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HttpClient</span><span class="o">();</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"url:::"</span> <span class="o">+</span> <span class="n">url</span><span class="o">);</span>
            <span class="nc">GetMethod</span> <span class="n">method</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GetMethod</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
            <span class="c1">//设定请求头的样式 </span>
            <span class="n">method</span><span class="o">.</span><span class="na">setRequestHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="s">"application/x-www-form-urlencoded;charset=utf-8"</span><span class="o">);</span>
            <span class="kt">int</span> <span class="n">code</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="na">executeMethod</span><span class="o">(</span><span class="n">method</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">code</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="n">code</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="na">getResponseBodyAsStream</span><span class="o">();</span>
                <span class="n">str</span> <span class="o">=</span> <span class="nc">IOUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// TODO Auto-generated catch block </span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">str</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**
     * 获取String的MD5值
     *
     * @param info 字符串
     * @return 该字符串的MD5值
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">getMD5</span><span class="o">(</span><span class="nc">String</span> <span class="n">info</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="c1">//获取 MessageDigest 对象，参数为 MD5 字符串，表示这是一个 MD5 算法（其他还有 SHA1 算法等）： </span>
            <span class="nc">MessageDigest</span> <span class="n">md5</span> <span class="o">=</span> <span class="nc">MessageDigest</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"MD5"</span><span class="o">);</span>

            <span class="c1">//update(byte[])方法，输入原数据 </span>
            <span class="c1">//类似StringBuilder对象的append()方法，追加模式，属于一个累计更改的过程 </span>
            <span class="n">md5</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">info</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>

            <span class="c1">//digest()被调用后,MessageDigest对象就被重置，即不能连续再次调用该方法计算原数据的MD5值。可以手动调用reset()方法重置输入源。 </span>
            <span class="c1">//digest()返回值16位长度的哈希值，由byte[]承接 </span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">md5Array</span> <span class="o">=</span> <span class="n">md5</span><span class="o">.</span><span class="na">digest</span><span class="o">();</span>

            <span class="c1">//byte[]通常我们会转化为十六进制的32位长度的字符串来使用,本文会介绍三种常用的转换方法 </span>
            <span class="k">return</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="n">md5Array</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">NoSuchAlgorithmException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">""</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="s">""</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">bytesToHex</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">md5Array</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">StringBuilder</span> <span class="n">strBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuilder</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">md5Array</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">temp</span> <span class="o">=</span> <span class="mh">0xff</span> <span class="o">&amp;</span> <span class="n">md5Array</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="nc">String</span> <span class="n">hexString</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">temp</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">hexString</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span><span class="c1">//如果是十六进制的0f，默认只显示f，此时要补上0</span>
                <span class="n">strBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"0"</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">hexString</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">strBuilder</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">hexString</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">strBuilder</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="o">}</span>

<span class="o">}</span>

</code></pre></div><h2 id='ws-api-demo-java'><span id="ws-api-java">ws-api Demo (java) </span></h2><div class="highlight"><pre class="highlight java tab-java"><code>
<span class="kn">package</span> <span class="nn">test</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.ByteArrayInputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.ByteArrayOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.ByteBuffer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.CharBuffer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.Charset</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.nio.charset.CharsetDecoder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.cert.CertificateException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.cert.X509Certificate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.HashMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.zip.GZIPInputStream</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.net.ssl.SSLContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.net.ssl.TrustManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.net.ssl.X509TrustManager</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.java_websocket.client.DefaultSSLWebSocketClientFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.java_websocket.client.WebSocketClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.java_websocket.drafts.Draft</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.java_websocket.drafts.Draft_17</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.java_websocket.handshake.ServerHandshake</span><span class="o">;</span>

<span class="cm">/**
 * @author 鲫鱼哥 DateTime:2018年11月22日 下午9:25:20 
 * 建议使用的websocket client版本 
 * &lt;dependency&gt; 
 * &lt;groupId&gt;org.java-websocket&lt;/groupId&gt; 
 * &lt;artifactId&gt;Java-WebSocket&lt;/artifactId&gt; 
 * &lt;version&gt;1.3.0&lt;/version&gt; 
 * &lt;/dependency&gt; 
 *
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WsTest</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
<span class="c1">//wsurl </span>
            <span class="nc">String</span> <span class="n">url</span> <span class="o">=</span> <span class="s">"wss://ws.wbf.live/kline-api/ws"</span><span class="o">;</span>
<span class="c1">//历史数据请求参数 </span>
            <span class="nc">String</span> <span class="n">reqParam</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">event</span><span class="s">":"</span><span class="n">req</span><span class="s">","</span><span class="n">params</span><span class="s">":{"</span><span class="n">channel</span><span class="s">":"</span><span class="n">market_btcusdt_trade_ticker</span><span class="s">","</span><span class="n">cb_id</span><span class="s">":"</span><span class="n">btcusdt</span><span class="s">","</span><span class="n">top</span><span class="s">":150}}"</span><span class="o">;</span>
<span class="c1">//订阅参数 </span>
            <span class="nc">String</span> <span class="n">subParam</span> <span class="o">=</span> <span class="s">"{"</span><span class="n">event</span><span class="s">":"</span><span class="n">sub</span><span class="s">","</span><span class="n">params</span><span class="s">":{"</span><span class="n">channel</span><span class="s">":"</span><span class="n">market_btcusdt_trade_ticker</span><span class="s">","</span><span class="n">cb_id</span><span class="s">":"</span><span class="n">btcusdt</span><span class="s">","</span><span class="n">top</span><span class="s">":150}}"</span><span class="o">;</span>

<span class="c1">//初始化请求历史数据 </span>
            <span class="nc">WebSocketUtils</span> <span class="n">wsc</span> <span class="o">=</span> <span class="nc">WebSocketUtils</span><span class="o">.</span><span class="na">executeWebSocket</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">reqParam</span><span class="o">);</span>

<span class="c1">//订阅实时数据 </span>
            <span class="n">wsc</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">subParam</span><span class="o">);</span>

<span class="c1">//线程不结束，等待新的消息，一般一分钟左右会有新的成交返回</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span>

        <span class="o">}</span><span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">static</span> <span class="kd">class</span> <span class="nc">WebSocketUtils</span> <span class="kd">extends</span> <span class="nc">WebSocketClient</span> <span class="o">{</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="nc">WebSocketUtils</span> <span class="n">wsclient</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="kd">private</span> <span class="nc">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">WebSocketUtils</span><span class="o">(</span><span class="no">URI</span> <span class="n">serverURI</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">serverURI</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="nf">WebSocketUtils</span><span class="o">(</span><span class="no">URI</span> <span class="n">serverUri</span><span class="o">,</span> <span class="nc">Draft</span> <span class="n">draft</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">serverUri</span><span class="o">,</span> <span class="n">draft</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="nf">WebSocketUtils</span><span class="o">(</span><span class="no">URI</span> <span class="n">serverUri</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span><span class="o">,</span> <span class="kt">int</span> <span class="n">connecttimeout</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">super</span><span class="o">(</span><span class="n">serverUri</span><span class="o">,</span> <span class="k">new</span> <span class="n">Draft_17</span><span class="o">(),</span> <span class="n">headers</span><span class="o">,</span> <span class="n">connecttimeout</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onOpen</span><span class="o">(</span><span class="nc">ServerHandshake</span> <span class="n">serverHandshake</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"链接已建立"</span><span class="o">);</span>

        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onMessage</span><span class="o">(</span><span class="nc">String</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"收到字符串消息"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onClose</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">,</span> <span class="nc">String</span> <span class="n">s</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"链接已关闭"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"报错啦"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onMessage</span><span class="o">(</span><span class="nc">ByteBuffer</span> <span class="n">socketBuffer</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">String</span> <span class="n">marketStr</span> <span class="o">=</span> <span class="n">byteBufferToString</span><span class="o">(</span><span class="n">socketBuffer</span><span class="o">);</span>
                <span class="nc">String</span> <span class="n">market</span> <span class="o">=</span> <span class="n">uncompress</span><span class="o">(</span><span class="n">marketStr</span><span class="o">).</span><span class="na">toLowerCase</span><span class="o">();</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">market</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"ping"</span><span class="o">))</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"收到消息ping："</span><span class="o">+</span><span class="n">market</span><span class="o">);</span>
                    <span class="nc">String</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">market</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s">"ping"</span><span class="o">,</span> <span class="s">"pong"</span><span class="o">);</span>
                    <span class="n">wsclient</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">market</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s">"ping"</span><span class="o">,</span> <span class="s">"pong"</span><span class="o">));</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="n">market</span><span class="o">;</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"收到消息："</span><span class="o">+</span><span class="n">msg</span><span class="o">);</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getWebSocketHeaders</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
            <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">headers</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">HashMap</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;();</span>
            <span class="k">return</span> <span class="n">headers</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">trustAllHosts</span><span class="o">(</span><span class="nc">WebSocketUtils</span> <span class="n">appClient</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">TrustManager</span><span class="o">[]</span> <span class="n">trustAllCerts</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TrustManager</span><span class="o">[]</span> <span class="o">{</span> <span class="k">new</span> <span class="nc">X509TrustManager</span><span class="o">()</span> <span class="o">{</span>
                <span class="kd">public</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">cert</span><span class="o">.</span><span class="na">X509Certificate</span><span class="o">[]</span> <span class="nf">getAcceptedIssuers</span><span class="o">()</span> <span class="o">{</span>
                    <span class="k">return</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">cert</span><span class="o">.</span><span class="na">X509Certificate</span><span class="o">[]</span> <span class="o">{};</span>
                <span class="o">}</span>

                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkClientTrusted</span><span class="o">(</span><span class="nc">X509Certificate</span><span class="o">[]</span> <span class="n">chain</span><span class="o">,</span> <span class="nc">String</span> <span class="n">authType</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">CertificateException</span> <span class="o">{</span>
                <span class="o">}</span>

                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkServerTrusted</span><span class="o">(</span><span class="nc">X509Certificate</span><span class="o">[]</span> <span class="n">chain</span><span class="o">,</span> <span class="nc">String</span> <span class="n">authType</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">CertificateException</span> <span class="o">{</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="o">};</span>

            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">SSLContext</span> <span class="n">sc</span> <span class="o">=</span> <span class="nc">SSLContext</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="s">"TLS"</span><span class="o">);</span>
                <span class="n">sc</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="kc">null</span><span class="o">,</span> <span class="n">trustAllCerts</span><span class="o">,</span> <span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">security</span><span class="o">.</span><span class="na">SecureRandom</span><span class="o">());</span>
                <span class="n">appClient</span><span class="o">.</span><span class="na">setWebSocketFactory</span><span class="o">(</span><span class="k">new</span> <span class="nc">DefaultSSLWebSocketClientFactory</span><span class="o">(</span><span class="n">sc</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kd">static</span> <span class="nc">WebSocketUtils</span> <span class="nf">executeWebSocket</span><span class="o">(</span><span class="nc">String</span> <span class="n">url</span><span class="o">,</span><span class="nc">String</span> <span class="n">sendMsg</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
            <span class="n">wsclient</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WebSocketUtils</span><span class="o">(</span><span class="k">new</span> <span class="no">URI</span><span class="o">(</span><span class="n">url</span><span class="o">),</span> <span class="n">getWebSocketHeaders</span><span class="o">(),</span> <span class="mi">1000</span><span class="o">);</span>
            <span class="n">trustAllHosts</span><span class="o">(</span><span class="n">wsclient</span><span class="o">);</span>
            <span class="n">wsclient</span><span class="o">.</span><span class="na">connectBlocking</span><span class="o">();</span>
            <span class="n">wsclient</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">sendMsg</span><span class="o">);</span>
            <span class="k">return</span> <span class="n">wsclient</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">// buffer 转String </span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">byteBufferToString</span><span class="o">(</span><span class="nc">ByteBuffer</span> <span class="n">buffer</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">CharBuffer</span> <span class="n">charBuffer</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
            <span class="k">try</span> <span class="o">{</span>
                <span class="nc">Charset</span> <span class="n">charset</span> <span class="o">=</span> <span class="nc">Charset</span><span class="o">.</span><span class="na">forName</span><span class="o">(</span><span class="s">"ISO-8859-1"</span><span class="o">);</span>
                <span class="nc">CharsetDecoder</span> <span class="n">decoder</span> <span class="o">=</span> <span class="n">charset</span><span class="o">.</span><span class="na">newDecoder</span><span class="o">();</span>
                <span class="n">charBuffer</span> <span class="o">=</span> <span class="n">decoder</span><span class="o">.</span><span class="na">decode</span><span class="o">(</span><span class="n">buffer</span><span class="o">);</span>
                <span class="n">buffer</span><span class="o">.</span><span class="na">flip</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">charBuffer</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">ex</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ex</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>

        <span class="c1">// 解压缩 </span>
        <span class="kd">public</span> <span class="nc">String</span> <span class="nf">uncompress</span><span class="o">(</span><span class="nc">String</span> <span class="n">str</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">str</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="n">str</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">str</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="nc">ByteArrayOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayOutputStream</span><span class="o">();</span>
            <span class="nc">ByteArrayInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"ISO-8859-1"</span><span class="o">));</span>
            <span class="nc">GZIPInputStream</span> <span class="n">gunzip</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GZIPInputStream</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">256</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">n</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">n</span> <span class="o">=</span> <span class="n">gunzip</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buffer</span><span class="o">))</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">n</span><span class="o">);</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">out</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
        <span class="o">}</span>

    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div>
      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
